Storage data structure of all Relationship objects.It is preferable to not store the RelationshipTable as part of the LogicProblem object and simply re-generate it from the Clues and Constraint, but instead be fields of the application Puzzled of the FXML controller, along with dirtyness. There are no advantages to adding relationships in a chronological order in the data structure, with a view to simplify undo because e.g. there is no temporal relationship between two constraints. Instead the full table can be initialized when the problem is created or loaded.The most efficient data structure for the RelationshipTable seems to be a fixed HashMap where an Item HashSet of 2 elements is used as key (sets are not concerned about element ordering, contrary to pairs) and a Relationship object is used as value. A regular 2D array is very inefficient because of the triangular nature of the grid (see below). HashMap<TreeSet<Item>,Relationship> seems to be the best data structure (the TreeSet class is an ordered set. Since the positionGridCell(TreeSet<Item>) algorithm makes computation using the lower and higher of the two item (ordered determined by the Category each item belong -> hence the TreeSet Comparator will use the same technique), it is best to have a two-member ordered set feeding it. It also helps for the RelationshipTable because no matter how the items are parsed from clues, they will result in the same TreeSet and hence the same mapped Relationship.Some conversion of the relationship key to the GridCell location will be needed..When a problem is loaded, the application needs to create the entire RelationshipTable. The Relationship object references (pointers) are passed around when adding to the double-linked lists. The RelationshipTable needs to be able to retrieve any Relationship object reference by specifying the "coordinates" of the values it represents.
Relationships that are anchored (anywhere upstream) to a clue or a constraint are immutable and will site with a gray background. Constraints entered by the user will show their Relationship in red.For a number N of categories of n items, the layout of the grid complies with the formula for triangular patterns such that:Number of Categories NTotal grid width & height(N-1)nNumber of category squaresN(N-1)/2Total number of relationshipsn2N(N-1)/22n1n232n33n243n66n254n1010n265n1515n2